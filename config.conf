[API]
base_url = https://iss.moex.com/iss
default_limit = 100

[TABLES]
bonds = bonds
quotas = bonds_quotas
coupons = bonds_coupon
amortizations = bonds_amortization
offers = bonds_offer

; --- Определение структур таблиц ---
; Каждая таблица определяется в своей подсекции [TABLE_SCHEMA:<table_key>]
; Формат: <имя_столбца_в_БД> = <тип_данных_postgresql>
; Порядок определяет порядок создания столбцов.
; Комментарии можно добавлять через ';'

[TABLE_SCHEMA:bonds]
; Основано на структуре из securities.json и примера RU000A106ZL5
secid = VARCHAR(50)
boardid = VARCHAR(20)
shortname = VARCHAR(255)
prevwaprice = NUMERIC
yieldatprevwaprice = NUMERIC
couponvalue = NUMERIC
nextcoupon = DATE
accruedint = NUMERIC
prevprice = NUMERIC
lotsize = INTEGER
facevalue = NUMERIC
boardname = VARCHAR(500)
status = VARCHAR(10)
matdate = DATE
decimals = INTEGER
couponperiod = INTEGER
issuesize = BIGINT
prevlegalcloseprice = NUMERIC
prevdate = DATE
secname = VARCHAR(255)
remarks = VARCHAR(100)
marketcode = VARCHAR(20)
instrid = VARCHAR(20)
sectorid = VARCHAR(20)
minstep = NUMERIC
faceunit = VARCHAR(20)
buybackprice = NUMERIC
; Добавьте другие поля из API, если необходимо
created_at = TIMESTAMP DEFAULT CURRENT_TIMESTAMP
updated_at = TIMESTAMP DEFAULT CURRENT_TIMESTAMP

[TABLE_SCHEMA:quotas]
; Основано на структуре из history.json и примера history-RU000A106ZL5.json.txt
boardid = VARCHAR(20)
tradedate = DATE NOT NULL
shortname = VARCHAR(255)
secid = VARCHAR(50)
numtrades = NUMERIC
value = NUMERIC
low = NUMERIC
high = NUMERIC
close = NUMERIC
legalcloseprice = NUMERIC
accint = NUMERIC
waprice = NUMERIC
yieldclose = NUMERIC
open = NUMERIC
volume = NUMERIC
marketprice2 = NUMERIC
marketprice3 = NUMERIC
admittedquote = NUMERIC
mp2valtrd = NUMERIC
marketprice3tradesvalue = NUMERIC
admittedvalue = NUMERIC
matdate = DATE
duration = NUMERIC
yieldatwap = NUMERIC
iricpiclose = NUMERIC
beiclose = NUMERIC
couponpercent = NUMERIC
couponvalue = NUMERIC
; Добавьте другие поля из API, если необходимо
created_at = TIMESTAMP DEFAULT CURRENT_TIMESTAMP
updated_at = TIMESTAMP DEFAULT CURRENT_TIMESTAMP

[TABLE_SCHEMA:coupons]
; Основано на структуре из bondization.json (блок coupons)
isin = VARCHAR(50) NOT NULL
name = VARCHAR(1000)
issuevalue = NUMERIC
coupondate = DATE NOT NULL
recorddate = DATE
startdate = DATE
initialfacevalue = NUMERIC
facevalue = NUMERIC
faceunit = VARCHAR(20)
value = NUMERIC
valueprc = NUMERIC
value_rub = NUMERIC
data_source = VARCHAR(50)
secid = VARCHAR(50)
primary_boardid = VARCHAR(20)
; Добавьте другие поля из API, если необходимо
created_at = TIMESTAMP DEFAULT CURRENT_TIMESTAMP
updated_at = TIMESTAMP DEFAULT CURRENT_TIMESTAMP

[TABLE_SCHEMA:amortizations]
; Основано на структуре из bondization.json (блок amortizations)
isin = VARCHAR(50) NOT NULL
name = VARCHAR(1000)
issuevalue = NUMERIC
amortdate = DATE NOT NULL
facevalue = NUMERIC
initialfacevalue = NUMERIC
faceunit = VARCHAR(20)
valueprc = NUMERIC
value = NUMERIC
value_rub = NUMERIC
data_source = VARCHAR(50)
secid = VARCHAR(50)
primary_boardid = VARCHAR(20)
; Добавьте другие поля из API, если необходимо
created_at = TIMESTAMP DEFAULT CURRENT_TIMESTAMP
updated_at = TIMESTAMP DEFAULT CURRENT_TIMESTAMP

[TABLE_SCHEMA:offers]
; Основано на структуре из bondization.json (блок offers)
isin = VARCHAR(50) NOT NULL
name = VARCHAR(1000)
issuevalue = NUMERIC
offerdate = DATE NOT NULL
offerdatestart = DATE
offerdateend = DATE
facevalue = NUMERIC
faceunit = VARCHAR(20)
price = NUMERIC
value = NUMERIC
agent = VARCHAR(500)
offertype = VARCHAR(200)
secid = VARCHAR(50)
primary_boardid = VARCHAR(20)
; Добавьте другие поля из API, если необходимо
created_at = TIMESTAMP DEFAULT CURRENT_TIMESTAMP
updated_at = TIMESTAMP DEFAULT CURRENT_TIMESTAMP

